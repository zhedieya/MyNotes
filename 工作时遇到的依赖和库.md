#### husky

##### pre-knowledge

- hookï¼Œç›´è¯‘è¿‡æ¥æ˜¯â€œé’©å­â€ï¼Œé€šå¸¸æ˜¯ç”¨äºåœ¨æŸäº‹ä»¶å‘ç”Ÿæˆ–è€…å®Œæˆåæ·»åŠ è‡ªå®šä¹‰çš„åŠ¨æ€äº‹ä»¶/ä»»åŠ¡ã€‚

  åœ¨ä½¿ç”¨ git æ—¶ï¼Œï¼Œgit hooks å°±æ˜¯åœ¨ git æ‰§è¡Œç‰¹å®šäº‹ä»¶ï¼ˆå¦‚commitã€pushã€receiveç­‰ï¼‰æ—¶è§¦å‘è¿è¡Œçš„è„šæœ¬ã€‚ã€‚å¦‚æœ git hook æ‰§è¡Œå¤±è´¥å°†ç»ˆæ­¢åç»­æ“ä½œã€‚

##### 1.æ˜¯ä»€ä¹ˆ

husky æ˜¯ä¸€ä¸ªè®©é…ç½® git é’©å­å˜å¾—æ›´ç®€å•çš„å·¥å…·ã€‚æ”¯æŒæ‰€æœ‰çš„gité’©å­ã€‚

##### 2.æ€ä¹ˆç”¨

é¦–å…ˆæ‰§è¡Œå®‰è£…å‘½ä»¤  `npm install husky --save-dev`

è¦åœ¨å®‰è£…åè‡ªåŠ¨å¯ç”¨é’©å­ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œ`npm set-script prepare "husky install"`

æ‰§è¡Œå®Œä¸Šä¸€æ­¥çš„å‘½ä»¤ä¹‹åå¯ä»¥åœ¨package.json æ–‡ä»¶çš„scriptsé…ç½®é¡¹ä¸­çœ‹åˆ°å¦‚ä¸‹ä»£ç ï¼š

<img src="https://raw.githubusercontent.com/zhedieya/MyPics/main/typora-img/image-20220727211448978.png" alt="image-20220727211448978" style="zoom:50%;" align="left" />

Add a hook:

```
npx husky add .husky/pre-commit "npm test"
git add .husky/pre-commit
```

Make a commit:

```
git commit -m "Keep calm and commit"
# `npm test` will run
```

#### lint-staged

##### pre-knowledge

- husky

##### 1.æ˜¯ä»€ä¹ˆ

**lint-staged æ˜¯ä¸€ä¸ªåœ¨gitæš‚å­˜åŒºä¸Šè¿è¡Œlintersçš„å·¥å…·ã€‚**ï¼ˆRun linters against staged git files and don't let ğŸ’© slip into your code base!ï¼‰

å®ƒå°†æ ¹æ®package.jsonä¾èµ–é¡¹ä¸­çš„ä»£ç è´¨é‡å·¥å…·æ¥å®‰è£…å’Œé…ç½® husky å’Œ lint-staged ï¼Œå› æ­¤è¯·ç¡®ä¿åœ¨æ­¤ä¹‹å‰å®‰è£…ï¼ˆnpm install --save-devï¼‰å¹¶é…ç½®æ‰€æœ‰ä»£ç è´¨é‡

å·¥å…·ï¼Œæ¯”å¦‚Prettierå’ŒESlintã€‚

##### 2.æ€ä¹ˆç”¨

- å®‰è£…ï¼šæ‰§è¡Œ `npm install lint-staged  --save-dev ` # requires further setup å‘½ä»¤