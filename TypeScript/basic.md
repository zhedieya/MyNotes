## ã€ŠTypeScriptå…¥é—¨æ•™ç¨‹ã€‹ç¬”è®°

é“¾æ¥ ğŸ”—ï¼š[ã€ŠTypeScriptå…¥é—¨æ•™ç¨‹ã€‹](https://ts.xcatliu.com)

#### TS ä»‹ç»

##### TypeScriptæ˜¯é™æ€è¯­è¨€

ç±»å‹ç³»ç»Ÿ<font color=FF0000> æŒ‰ç…§ã€Œç±»å‹æ£€æŸ¥çš„æ—¶æœºã€æ¥åˆ†ç±»ï¼Œå¯ä»¥åˆ†ä¸ºåŠ¨æ€ç±»å‹å’Œé™æ€ç±»å‹</font>ã€‚

- **åŠ¨æ€ç±»å‹** æ˜¯æŒ‡åœ¨<font color=FF0000> è¿è¡Œæ—¶æ‰ä¼šè¿›è¡Œç±»å‹æ£€æŸ¥</font>ï¼Œè¿™ç§è¯­è¨€çš„ç±»å‹é”™è¯¯å¾€å¾€ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ã€‚
- **é™æ€ç±»å‹** æ˜¯æŒ‡<font color=FF0000> ç¼–è¯‘é˜¶æ®µå°±èƒ½ç¡®å®šæ¯ä¸ªå˜é‡çš„ç±»å‹</font>ï¼Œè¿™ç§è¯­è¨€çš„ç±»å‹é”™è¯¯å¾€å¾€ä¼šå¯¼è‡´è¯­æ³•é”™è¯¯ã€‚

<mark>JavaScript æ˜¯ä¸€é—¨è§£é‡Šå‹è¯­è¨€ï¼Œæ²¡æœ‰ç¼–è¯‘é˜¶æ®µï¼Œæ‰€ä»¥å®ƒæ˜¯åŠ¨æ€ç±»å‹ã€‚</mark>

<font color=fuchsia>**TypeScript åœ¨è¿è¡Œå‰éœ€è¦å…ˆç¼–è¯‘ä¸º JavaScriptï¼Œè€Œåœ¨ç¼–è¯‘é˜¶æ®µå°±ä¼šè¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œæ‰€ä»¥ TypeScript æ˜¯é™æ€ç±»å‹**</font>

##### TypeScriptæ˜¯å¼±ç±»å‹

<font color=FF0000>ç±»å‹ç³»ç»ŸæŒ‰ç…§ã€Œæ˜¯å¦å…è®¸éšå¼ç±»å‹è½¬æ¢ã€æ¥åˆ†ç±»</font>ï¼Œå¯ä»¥åˆ†ä¸ºå¼ºç±»å‹å’Œå¼±ç±»å‹

TypeScript æ˜¯å®Œå…¨å…¼å®¹ JavaScript çš„ï¼Œå®ƒä¸ä¼šä¿®æ”¹ JavaScript è¿è¡Œæ—¶çš„ç‰¹æ€§ï¼Œæ‰€ä»¥å®ƒä»¬éƒ½æ˜¯å¼±ç±»å‹ã€‚

**è¡¥å……ï¼š**

![20191031230816827](https://i.loli.net/2021/08/31/mvDCBdjIHUfTO8V.png)

##### TSçš„ç±»å‹å’Œç¼–è¯‘

åœ¨ TypeScript ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ `:` æŒ‡å®šå˜é‡çš„ç±»å‹ï¼Œ`:` çš„å‰åæœ‰æ²¡æœ‰ç©ºæ ¼éƒ½å¯ä»¥ã€‚

**TypeScript åªä¼šåœ¨ç¼–è¯‘æ—¶å¯¹ç±»å‹è¿›è¡Œé™æ€æ£€æŸ¥ï¼Œå¦‚æœå‘ç°æœ‰é”™è¯¯ï¼Œç¼–è¯‘çš„æ—¶å€™å°±ä¼šæŠ¥é”™**ã€‚

TypeScript ç¼–è¯‘çš„æ—¶å€™å³ä½¿æŠ¥é”™äº†ï¼Œè¿˜æ˜¯ä¼šç”Ÿæˆç¼–è¯‘ç»“æœï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥ä½¿ç”¨è¿™ä¸ªç¼–è¯‘ä¹‹åçš„æ–‡ä»¶ã€‚

å¦‚æœè¦åœ¨æŠ¥é”™çš„æ—¶å€™ç»ˆæ­¢ js æ–‡ä»¶çš„ç”Ÿæˆï¼Œå¯ä»¥åœ¨ tsconfig.json ä¸­é…ç½® noEmitOnError å³å¯



#### ç‰¹æ®Šç±»å‹

##### ç©ºå€¼

JavaScript æ²¡æœ‰ç©ºå€¼ Void çš„æ¦‚å¿µï¼Œåœ¨ TypeScript ä¸­ï¼Œå¯ä»¥ç”¨ void è¡¨ç¤ºæ²¡æœ‰ä»»ä½•è¿”å›å€¼çš„å‡½æ•°ï¼š

```ts
function alertName(): void {
    alert('My name is Tom');
}
```

å£°æ˜ä¸€ä¸ª void ç±»å‹çš„å˜é‡æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œå› ä¸ºä½ åªèƒ½å°†å®ƒèµ‹å€¼ä¸º undefined å’Œ nullï¼ˆåªåœ¨ tsconfigä¸­ `--strictNullChecks` æœªæŒ‡å®šæ—¶ï¼‰ï¼š

```ts
let unusable: void = undefined;
```

##### Null å’Œ Undefined

åœ¨ TypeScript ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ null å’Œ undefined æ¥å®šä¹‰è¿™ä¸¤ä¸ªåŸå§‹æ•°æ®ç±»å‹ï¼š

```ts
let u: undefined = undefined;
let n: null = null;
```

ä¸ void çš„åŒºåˆ«æ˜¯ï¼š<font color=FF0000>undefined å’Œ null æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹</font>ã€‚<font color=FF0000>ä¹Ÿå°±æ˜¯è¯´ undefined ç±»å‹çš„å˜é‡ï¼Œå¯ä»¥èµ‹å€¼ç»™ number ç±»å‹çš„å˜é‡</font>ï¼š

```ts
// è¿™æ ·ä¸ä¼šæŠ¥é”™
let num: number = undefined;
// è¿™æ ·ä¹Ÿä¸ä¼šæŠ¥é”™
let u: undefined;
let num: number = u;
```

è€Œ void ç±»å‹çš„å˜é‡ä¸èƒ½èµ‹å€¼ç»™ number ç±»å‹çš„å˜é‡ï¼š

```ts
let u: void;
let num: number = u;
// Type 'void' is not assignable to type 'number'.
```

##### ä»»æ„å€¼

**ä»»æ„å€¼ï¼ˆAnyï¼‰ç”¨æ¥<font color=FF0000> è¡¨ç¤ºå…è®¸èµ‹å€¼ä¸ºä»»æ„ç±»å‹</font>ã€‚**

å¦‚æœæ˜¯ä¸€ä¸ªæ™®é€šç±»å‹ï¼Œåœ¨èµ‹å€¼è¿‡ç¨‹ä¸­æ”¹å˜ç±»å‹æ˜¯ä¸è¢«å…è®¸çš„ã€‚<font color=FF0000> å¦‚æœæ˜¯ any ç±»å‹ï¼Œåˆ™å…è®¸è¢«èµ‹å€¼ä¸ºä»»æ„ç±»å‹</font>ã€‚

```ts
let myFavoriteNumber: any = 'seven';
myFavoriteNumber = 7;
```

**ä»»æ„å€¼çš„å±æ€§å’Œæ–¹æ³•**

<font color=FF0000> åœ¨ä»»æ„å€¼ä¸Šè®¿é—®ä»»ä½•å±æ€§Få…è®¸çš„</font>ï¼š

```ts
let anyThing: any = 'hello';
console.log(anyThing.myName);
console.log(anyThing.myName.firstName);
```

<font color=FF0000> ä¹Ÿå…è®¸è°ƒç”¨ä»»ä½•æ–¹æ³•</font>ï¼š

```ts
let anyThing: any = 'Tom';
anyThing.setName('Jerry');
anyThing.setName('Jerry').sayHello();
anyThing.myName.setFirstName('Cat');
```

å¯ä»¥è®¤ä¸ºï¼Œå£°æ˜ä¸€ä¸ªå˜é‡ä¸ºä»»æ„å€¼ä¹‹åï¼Œå¯¹å®ƒçš„ä»»ä½•æ“ä½œï¼Œè¿”å›çš„å†…å®¹çš„ç±»å‹éƒ½æ˜¯ä»»æ„å€¼

<font color=FF0000> **å˜é‡å¦‚æœåœ¨å£°æ˜çš„æ—¶å€™ï¼ŒæœªæŒ‡å®šå…¶ç±»å‹ï¼Œé‚£ä¹ˆå®ƒä¼šè¢«è¯†åˆ«ä¸ºä»»æ„å€¼ç±»å‹**ï¼š</font>

```ts
let something;
something = 'seven';
something = 7;

something.setName('Tom');
```

ç­‰ä»·äº

```ts
let something: any;
something = 'seven';
something = 7;

something.setName('Tom');
```



#### ç±»å‹æ¨è®º

ä»¥ä¸‹ä»£ç è™½ç„¶æ²¡æœ‰æŒ‡å®šç±»å‹ï¼Œä½†æ˜¯ä¼šåœ¨ç¼–è¯‘çš„æ—¶å€™æŠ¥é”™ï¼š

```ts
let myFavoriteNumber = 'seven';
myFavoriteNumber = 7;

// index.ts(2,1): error TS2322: Type 'number' is not assignable to type 'string'.
```

äº‹å®ä¸Šï¼Œå®ƒç­‰ä»·äºï¼š

```ts
let myFavoriteNumber: string = 'seven';
myFavoriteNumber = 7;

// index.ts(2,1): error TS2322: Type 'number' is not assignable to type 'string'.
```

TypeScript ä¼šåœ¨æ²¡æœ‰æ˜ç¡®çš„æŒ‡å®šç±»å‹çš„æ—¶å€™æ¨æµ‹å‡ºä¸€ä¸ªç±»å‹ï¼Œè¿™å°±æ˜¯**ç±»å‹æ¨è®º**ã€‚

å¦‚æœæ²¡æœ‰æ˜ç¡®çš„æŒ‡å®šç±»å‹ï¼Œé‚£ä¹ˆ TypeScript ä¼šä¾ç…§ç±»å‹æ¨è®ºï¼ˆType Inferenceï¼‰çš„è§„åˆ™æ¨æ–­å‡ºä¸€ä¸ªç±»å‹ã€‚

**å¦‚æœå®šä¹‰çš„æ—¶å€™æ²¡æœ‰èµ‹å€¼ï¼Œä¸ç®¡ä¹‹åæœ‰æ²¡æœ‰èµ‹å€¼ï¼Œéƒ½ä¼šè¢«æ¨æ–­æˆ any ç±»å‹è€Œå®Œå…¨ä¸è¢«ç±»å‹æ£€æŸ¥**

```ts
let myFavoriteNumber;
myFavoriteNumber = 'seven';
myFavoriteNumber = 7;
```



#### è”åˆç±»å‹

è”åˆç±»å‹ ( Union Types ) è¡¨ç¤º<font color=FF0000> å–å€¼å¯ä»¥ä¸ºå¤šç§ç±»å‹ä¸­çš„ä¸€ç§</font>ã€‚

##### ç¤ºä¾‹

```ts
let myFavoriteNumber: string | number;
myFavoriteNumber = 'seven';
myFavoriteNumber = 7;
```

```ts
let myFavoriteNumber: string | number;
myFavoriteNumber = true;

// index.ts(2,1): error TS2322: Type 'boolean' is not assignable to type 'string | number'.
//   Type 'boolean' is not assignable to type 'number'.
```

è”åˆç±»å‹ä½¿ç”¨ `|` åˆ†éš”æ¯ä¸ªç±»å‹ã€‚

è¿™é‡Œ ` let myFavoriteNumber: string | number ` çš„å«ä¹‰æ˜¯ï¼Œ<font color=FF0000> å…è®¸ `myFavoriteNumber` çš„ç±»å‹æ˜¯ `string` æˆ–è€… `number` ï¼Œä½†æ˜¯ä¸èƒ½æ˜¯å…¶ä»–ç±»å‹</font>ã€‚

å½“ TypeScript ä¸ç¡®å®šä¸€ä¸ªè”åˆç±»å‹çš„å˜é‡åˆ°åº•æ˜¯å“ªä¸ªç±»å‹çš„æ—¶å€™ï¼Œ<font color=FF0000> æˆ‘ä»¬åªèƒ½è®¿é—®æ­¤è”åˆç±»å‹çš„æ‰€æœ‰ç±»å‹é‡Œ**å…±æœ‰çš„**å±æ€§æˆ–æ–¹æ³•</font>ã€‚

```ts
function getLength(something: string | number): number {
    return something.length;
}

// index.ts(2,22): error TS2339: Property 'length' does not exist on type 'string | number'.
//   Property 'length' does not exist on type 'number'.
```

è”åˆç±»å‹çš„å˜é‡åœ¨è¢«èµ‹å€¼çš„æ—¶å€™ï¼Œä¼šæ ¹æ®ç±»å‹æ¨è®ºçš„è§„åˆ™æ¨æ–­å‡ºä¸€ä¸ªç±»å‹



#### å¯¹è±¡çš„ç±»å‹â€”â€”æ¥å£

åœ¨ TypeScript ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<font color=FF0000> æ¥å£ï¼ˆInterfacesï¼‰æ¥å®šä¹‰å¯¹è±¡çš„ç±»å‹</font>ã€‚

##### ä»€ä¹ˆæ˜¯æ¥å£

åœ¨é¢å‘å¯¹è±¡è¯­è¨€ä¸­ï¼Œæ¥å£ ( Interfaces ) æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µï¼Œå®ƒæ˜¯å¯¹è¡Œä¸ºçš„æŠ½è±¡ï¼Œè€Œå…·ä½“å¦‚ä½•è¡ŒåŠ¨éœ€è¦ç”±ç±» ( classes ) å»å®ç° ( implement )ã€‚

TypeScript ä¸­çš„æ¥å£æ˜¯ä¸€ä¸ªéå¸¸çµæ´»çš„æ¦‚å¿µï¼Œé™¤äº†å¯ç”¨äºå¯¹ç±»çš„ä¸€éƒ¨åˆ†è¡Œä¸ºè¿›è¡ŒæŠ½è±¡ä»¥å¤–ï¼Œä¹Ÿå¸¸ç”¨äºå¯¹ã€Œå¯¹è±¡çš„å½¢çŠ¶ ( Shape )ã€è¿›è¡Œæè¿°ã€‚

<font color=red>**æ¥å£ä¸€èˆ¬é¦–å­—æ¯å¤§å†™**</font>

##### ç¤ºä¾‹

```ts
interface Person {
    name: string;
    age: number;
}

let tom: Person = {
    name: 'Tom',
    age: 25
};
```

ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ¥å£ `Person` ï¼Œæ¥ç€å®šä¹‰äº†ä¸€ä¸ªå˜é‡ tomï¼Œå®ƒçš„ç±»å‹æ˜¯ `Person` ã€‚<font color=FF0000>è¿™æ ·ï¼Œæˆ‘ä»¬å°±çº¦æŸäº† tom çš„Â **å½¢çŠ¶å¿…é¡»å’Œæ¥å£ `Person` ä¸€è‡´**</font>ã€‚å®šä¹‰çš„å˜é‡æ¯”æ¥å£å°‘äº†ä¸€äº›å±æ€§æ˜¯ä¸å…è®¸çš„ï¼Œå¤šä¸€äº›å±æ€§ä¹Ÿæ˜¯ä¸å…è®¸çš„ã€‚

##### å¯é€‰å±æ€§

æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›ä¸è¦å®Œå…¨åŒ¹é…ä¸€ä¸ªå½¢çŠ¶ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨å¯é€‰å±æ€§ï¼š

```ts
interface Person {
    name: string;
    age?: number;
}

let tom: Person = {
    name: 'Tom'
};
```

å¯é€‰å±æ€§çš„å«ä¹‰æ˜¯è¯¥å±æ€§å¯ä»¥ä¸å­˜åœ¨ã€‚è¿™æ—¶**ä»ç„¶ä¸å…è®¸æ·»åŠ æœªå®šä¹‰çš„å±æ€§**

##### ä»»æ„å±æ€§

> ğŸ‘€ æ³¨ï¼šæ›´ä¸“ä¸šçš„åç§°å«ä½œ â€œ**ç´¢å¼•ç­¾å**â€ ( [Index Signatures](https://www.typescriptlang.org/docs/handbook/2/objects.html#index-signatures) )

æœ‰æ—¶å€™æˆ‘ä»¬<font color=dodgerblue>Â **å¸Œæœ›ä¸€ä¸ªæ¥å£å…è®¸æœ‰ä»»æ„çš„å±æ€§ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼**</font>ï¼š

```ts
interface Person {
    name: string;
    age?: number;
    [propName: string]: any;
}

let tom: Person = {
    name: 'Tom',
    gender: 'male'
};
```

<font color=fuchsia> ä½¿ç”¨ `[propName: string]` å®šä¹‰äº†ä»»æ„å±æ€§å– string ç±»å‹çš„å€¼</font>ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<font color=red> **ä¸€æ—¦å®šä¹‰äº†ä»»æ„å±æ€§ï¼Œé‚£ä¹ˆç¡®å®šå±æ€§å’Œå¯é€‰å±æ€§çš„ç±»å‹éƒ½å¿…é¡»æ˜¯å®ƒçš„ç±»å‹çš„å­é›†**ï¼š</font>

```ts
interface Person {
    name: string;
    age?: number;
    [propName: string]: string;
}

let tom: Person = {
    name: 'Tom',
    age: 25,
    gender: 'male'
};
// index.ts(3,5): error TS2411: Property 'age' of type 'number' is not assignable to string index type 'string'.
// index.ts(7,5): error TS2322: Type '{ [x: string]: string | number; name: string; age: number; gender: string; }' is not assignable to type 'Person'.
//   Index signatures are incompatible.
//     Type 'string | number' is not assignable to type 'string'.
//       Type 'number' is not assignable to type 'string'.
```

ä¸Šä¾‹ä¸­ï¼Œä»»æ„å±æ€§çš„å€¼å…è®¸æ˜¯ stringï¼Œä½†æ˜¯å¯é€‰å±æ€§ age çš„å€¼å´æ˜¯ numberï¼Œnumber ä¸æ˜¯ string çš„å­å±æ€§ï¼Œæ‰€ä»¥æŠ¥é”™äº†ã€‚

å¦å¤–ï¼Œåœ¨æŠ¥é”™ä¿¡æ¯ä¸­å¯ä»¥çœ‹å‡ºï¼Œæ­¤æ—¶ `{ name: 'Tom', age: 25, gender: 'male' }` çš„ç±»å‹è¢«æ¨æ–­æˆäº† `{ [x: string]: string | number; name: string; age: number; gender: string; }` ï¼Œè¿™æ˜¯è”åˆç±»å‹å’Œæ¥å£çš„ç»“åˆã€‚

ä¸€ä¸ªæ¥å£ä¸­åªèƒ½å®šä¹‰ä¸€ä¸ªä»»æ„å±æ€§ã€‚<font color=FF0000> å¦‚æœæ¥å£ä¸­æœ‰å¤šä¸ªç±»å‹çš„å±æ€§ï¼Œåˆ™å¯ä»¥åœ¨ä»»æ„å±æ€§ä¸­ä½¿ç”¨è”åˆç±»å‹</font>ï¼š

```ts
interface Person {
    name: string;
    age?: number;
    [propName: string]: string | number;
}

let tom: Person = {
    name: 'Tom',
    age: 25,
    gender: 'male'
};
```

> âš ï¸ ä¸è¿‡æˆ‘è¿™å„¿æŠ¥é”™äº† **ç±»å‹â€œnumber | undefinedâ€çš„å±æ€§â€œageâ€ä¸èƒ½èµ‹ç»™â€œstringâ€ç´¢å¼•ç±»å‹â€œstring | numberâ€ã€‚**ts(2411)

<font color=dodgerblue> **è¡¥å……ï¼š**</font>ç±»ä¼¼çš„å±æ€§åœ¨å¯¹è±¡ä¸­å¯ä»¥å®šä¹‰å¤šä¸ªã€‚ä¸æ˜¯ä¸€ä¸ªæ¥å£ä¸­çš„å¯é€‰å±æ€§ï¼Œåœ¨å¯¹è±¡ä¸­åªèƒ½å®šä¹‰ä¸€æ¬¡ï¼›è€Œæ˜¯å¯ä»¥å®šä¹‰æˆå¤šä¸ª

> ğŸ‘€ å®˜æ–¹æ–‡æ¡£è¡¥å……
>
> > An index signature property type must be either â€˜stringâ€™ or â€˜numberâ€™. ï¼ˆæ³¨ï¼šä¹Ÿå°±æ˜¯è¯´ä¸èƒ½æ˜¯ `symbol` ç±»å‹ï¼Ÿï¼‰

##### åªè¯»å±æ€§

æœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›å¯¹è±¡ä¸­çš„ä¸€äº›å­—æ®µåªèƒ½åœ¨åˆ›å»ºçš„æ—¶å€™è¢«èµ‹å€¼ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ readonly å®šä¹‰åªè¯»å±æ€§

```ts
interface Person {
    readonly id: number;
  	// ...
}
```

**æ³¨æ„ï¼Œåªè¯»çš„çº¦æŸå­˜åœ¨äºç¬¬ä¸€æ¬¡ç»™å¯¹è±¡èµ‹å€¼çš„æ—¶å€™ï¼Œè€Œä¸æ˜¯ç¬¬ä¸€æ¬¡ç»™åªè¯»å±æ€§èµ‹å€¼çš„æ—¶å€™**



#### æ•°ç»„çš„ç±»å‹

åœ¨ TypeScript ä¸­ï¼Œæ•°ç»„ç±»å‹æœ‰å¤šç§å®šä¹‰æ–¹å¼ï¼Œæ¯”è¾ƒçµæ´»ã€‚

##### ã€Œç±»å‹ + æ–¹æ‹¬å·ã€è¡¨ç¤ºæ³•

<font color=FF0000> æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ã€Œç±»å‹ + æ–¹æ‹¬å·ã€æ¥è¡¨ç¤ºæ•°ç»„</font>ï¼š

```ts
let fibonacci: number[] = [1, 1, 2, 3, 5];
```

æ•°ç»„çš„é¡¹ä¸­**ä¸å…è®¸**å‡ºç°å…¶ä»–çš„ç±»å‹ï¼š

```ts
let fibonacci: number[] = [1, '1', 2, 3, 5];
// Type 'string' is not assignable to type 'number'.
```

##### æ•°ç»„æ³›å‹

æˆ‘ä»¬ä¹Ÿ<font color=FF0000> å¯ä»¥ä½¿ç”¨æ•°ç»„æ³›å‹ï¼ˆArray Genericï¼‰ Array\<elemType> æ¥è¡¨ç¤ºæ•°ç»„</font>

```ts
let fibonacci: Array<number> = [1, 1, 2, 3, 5];
```

##### ç”¨æ¥å£è¡¨ç¤ºæ•°ç»„

<font color=FF0000> æ¥å£ä¹Ÿå¯ä»¥ç”¨æ¥æè¿°æ•°ç»„</font>ï¼š

```ts
interface NumberArray {
	[index: number]: number;
}
let fibonacci: NumberArray = [1, 1, 2, 3, 5];
```

##### ç±»æ•°ç»„

ç±»æ•°ç»„ï¼ˆArray-like Objectï¼‰ä¸æ˜¯æ•°ç»„ç±»å‹

äº‹å®ä¸Šå¸¸ç”¨çš„ç±»æ•°ç»„éƒ½æœ‰è‡ªå·±çš„æ¥å£å®šä¹‰ï¼Œå¦‚ `IArguments`, `NodeList`, `HTMLCollection` ç­‰ï¼š

```ts
function sum() {
    let args: IArguments = arguments;
}
```

å…¶ä¸­ `IArguments` æ˜¯ TypeScript ä¸­å®šä¹‰å¥½äº†çš„ç±»å‹ï¼Œå®ƒå®é™…ä¸Šå°±æ˜¯ï¼š

```ts
interface IArguments {
    [index: number]: any;
    length: number;
    callee: Function;
}
```

##### any åœ¨æ•°ç»„ä¸­çš„åº”ç”¨

ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„åšæ³•æ˜¯ï¼Œç”¨ any è¡¨ç¤ºæ•°ç»„ä¸­å…è®¸å‡ºç°ä»»æ„ç±»å‹ï¼š

```ts
let list: any[] = ['xcatliu', 25, { website: 'http://xcatliu.com' }];
```



#### å‡½æ•°çš„ç±»å‹

##### å‡½æ•°å£°æ˜

åœ¨ JavaScript ä¸­ï¼Œ<font color=FF0000> æœ‰ä¸¤ç§å¸¸è§çš„å®šä¹‰å‡½æ•°çš„æ–¹å¼â€”â€”å‡½æ•°å£°æ˜ï¼ˆFunction Declarationï¼‰å’Œå‡½æ•°è¡¨è¾¾å¼ï¼ˆFunction Expressionï¼‰</font>ï¼š

```js
// å‡½æ•°å£°æ˜ï¼ˆFunction Declarationï¼‰
function sum(x, y) {
    return x + y;
}

// å‡½æ•°è¡¨è¾¾å¼ï¼ˆFunction Expressionï¼‰
let mySum = function (x, y) {
    return x + y;
};
```

ä¸€ä¸ªå‡½æ•°æœ‰è¾“å…¥å’Œè¾“å‡ºï¼Œè¦åœ¨ TypeScript ä¸­å¯¹å…¶è¿›è¡Œçº¦æŸï¼Œéœ€è¦æŠŠè¾“å…¥å’Œè¾“å‡ºéƒ½è€ƒè™‘åˆ°ï¼Œå…¶ä¸­<font color=FF0000> **å‡½æ•°å£°æ˜çš„ç±»å‹å®šä¹‰**</font>è¾ƒç®€å•ï¼š

```ts
function sum(x: number, y: number): number {
    return x + y;
}
```

æ³¨æ„ï¼Œ**è¾“å…¥å¤šä½™çš„ï¼ˆæˆ–è€…å°‘äºè¦æ±‚çš„ï¼‰å‚æ•°ï¼Œæ˜¯ä¸è¢«å…è®¸çš„**

##### å‡½æ•°è¡¨è¾¾å¼

å¦‚æœè¦æˆ‘ä»¬ç°åœ¨å†™ä¸€ä¸ªå¯¹<font color=FF0000> å‡½æ•°è¡¨è¾¾å¼ï¼ˆFunction Expressionï¼‰</font>çš„å®šä¹‰ï¼Œå¯èƒ½ä¼šå†™æˆè¿™æ ·ï¼š

```ts
let mySum = function (x: number, y: number): number {
    return x + y;
};
```

è¿™æ˜¯å¯ä»¥é€šè¿‡ç¼–è¯‘çš„ï¼Œä¸è¿‡äº‹å®ä¸Šï¼Œä¸Šé¢çš„ä»£ç åªå¯¹ç­‰å·å³ä¾§çš„åŒ¿åå‡½æ•°è¿›è¡Œäº†ç±»å‹å®šä¹‰ï¼Œè€Œç­‰å·å·¦è¾¹çš„ mySumï¼Œæ˜¯é€šè¿‡èµ‹å€¼æ“ä½œè¿›è¡Œç±»å‹æ¨è®ºè€Œæ¨æ–­å‡ºæ¥çš„ã€‚å¦‚æœéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ç»™ mySum æ·»åŠ ç±»å‹ï¼Œåˆ™åº”è¯¥æ˜¯è¿™æ ·ï¼š

```ts
let mySum: (x: number, y: number) => number = function (x: number, y: number): number {
    return x + y;
};
```

**æ³¨æ„ä¸è¦æ··æ·†äº† TypeScript ä¸­çš„ => å’Œ ES6 ä¸­çš„ =>ã€‚**

åœ¨ TypeScript çš„ç±»å‹å®šä¹‰ä¸­ï¼Œ=> ç”¨æ¥è¡¨ç¤ºå‡½æ•°çš„å®šä¹‰ï¼Œå·¦è¾¹æ˜¯è¾“å…¥ç±»å‹ï¼Œéœ€è¦ç”¨æ‹¬å·æ‹¬èµ·æ¥ï¼Œå³è¾¹æ˜¯è¾“å‡ºç±»å‹ã€‚

åœ¨ ES6 ä¸­ï¼Œ=> å«åšç®­å¤´å‡½æ•°ï¼Œåº”ç”¨ååˆ†å¹¿æ³›ï¼Œå¯ä»¥å‚è€ƒ [ES6 ä¸­çš„ç®­å¤´å‡½æ•°](http://es6.ruanyifeng.com/#docs/function#ç®­å¤´å‡½æ•°)

##### ç”¨æ¥å£å®šä¹‰å‡½æ•°çš„å½¢çŠ¶

æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨æ¥å£çš„æ–¹å¼æ¥å®šä¹‰ä¸€ä¸ªå‡½æ•°éœ€è¦ç¬¦åˆçš„å½¢çŠ¶ï¼š

```ts
interface SearchFunc {
    (source: string, subString: string): boolean;
}

let mySearch: SearchFunc;
mySearch = function(source: string, subString: string) {
    return source.search(subString) !== -1;
}
```

é‡‡ç”¨å‡½æ•°è¡¨è¾¾å¼|æ¥å£å®šä¹‰å‡½æ•°çš„æ–¹å¼æ—¶ï¼Œå¯¹ç­‰å·å·¦ä¾§è¿›è¡Œç±»å‹é™åˆ¶ï¼Œå¯ä»¥ä¿è¯ä»¥åå¯¹å‡½æ•°åèµ‹å€¼æ—¶ä¿è¯å‚æ•°ä¸ªæ•°ã€å‚æ•°ç±»å‹ã€è¿”å›å€¼ç±»å‹ä¸å˜ã€‚

##### å¯é€‰å‚æ•°

<font color=FF0000> ç”¨ `?` è¡¨ç¤ºå¯é€‰çš„å‚æ•°ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯é€‰å‚æ•°å¿…é¡»æ¥åœ¨å¿…éœ€å‚æ•°åé¢ã€‚æ¢å¥è¯è¯´ï¼Œ**å¯é€‰å‚æ•°åé¢ä¸å…è®¸å†å‡ºç°å¿…éœ€å‚æ•°äº†**</font>

```ts
function buildName(firstName: string, lastName?: string) {
    if (lastName) {
        return firstName + ' ' + lastName;
    } else {
        return firstName;
    }
}
let tomcat = buildName('Tom', 'Cat');
let tom = buildName('Tom');
```

##### å‚æ•°é»˜è®¤å€¼

åœ¨ ES6 ä¸­ï¼Œæˆ‘ä»¬å…è®¸ç»™å‡½æ•°çš„å‚æ•°æ·»åŠ é»˜è®¤å€¼ï¼Œ<font color=FF0000> TypeScript ä¼šå°†æ·»åŠ äº†**é»˜è®¤å€¼çš„å‚æ•°è¯†åˆ«ä¸ºå¯é€‰å‚æ•°** </font>ï¼š

```ts
function buildName(firstName: string, lastName: string = 'Cat') {
    return firstName + ' ' + lastName;
}
let tomcat = buildName('Tom', 'Cat');
let tom = buildName('Tom');
```

<font color=FF0000> æ­¤æ—¶å°±ä¸å—ã€Œå¯é€‰å‚æ•°å¿…é¡»æ¥åœ¨å¿…éœ€å‚æ•°åé¢ã€çš„é™åˆ¶äº†</font>

**å‰©ä½™å‚æ•°**

ES6 ä¸­ï¼Œ<font color=FF0000> å¯ä»¥ä½¿ç”¨ `...rest` çš„æ–¹å¼è·å–å‡½æ•°ä¸­çš„å‰©ä½™å‚æ•°ï¼ˆrest å‚æ•°ï¼‰</font>ã€‚items æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨æ•°ç»„çš„ç±»å‹æ¥å®šä¹‰å®ƒï¼š

```ts
function push(array: any[], ...items: any[]) {
    items.forEach(function(item) {
        array.push(item);
    });
}
let a = [];
push(a, 1, 2, 3);
```

<font color=FF0000> æ³¨æ„ï¼Œ`rest` å‚æ•°åªèƒ½æ˜¯æœ€åä¸€ä¸ªå‚æ•°</font>

##### é‡è½½

**é‡è½½å…è®¸ä¸€ä¸ªå‡½æ•°æ¥å—ä¸åŒæ•°é‡æˆ–ç±»å‹çš„å‚æ•°æ—¶ï¼Œä½œå‡ºä¸åŒçš„å¤„ç†**

æ¯”å¦‚ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªå‡½æ•° reverseï¼Œè¾“å…¥æ•°å­— 123 çš„æ—¶å€™ï¼Œè¾“å‡ºåè½¬çš„æ•°å­— 321ï¼Œè¾“å…¥å­—ç¬¦ä¸² 'hello' çš„æ—¶å€™ï¼Œè¾“å‡ºåè½¬çš„å­—ç¬¦ä¸² 'olleh'ã€‚

åˆ©ç”¨è”åˆç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå®ç°ï¼š

```ts
function reverse(x: number | string): number | string | void {
    if (typeof x === 'number') {
        return Number(x.toString().split('').reverse().join(''));
    } else if (typeof x === 'string') {
        return x.split('').reverse().join('');
    }
}
```

**ç„¶è€Œè¿™æ ·æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯ä¸èƒ½å¤Ÿç²¾ç¡®çš„è¡¨è¾¾ï¼Œè¾“å…¥ä¸ºæ•°å­—çš„æ—¶å€™ï¼Œè¾“å‡ºä¹Ÿåº”è¯¥ä¸ºæ•°å­—ï¼Œè¾“å…¥ä¸ºå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œè¾“å‡ºä¹Ÿåº”è¯¥ä¸ºå­—ç¬¦ä¸²ã€‚**

è¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é‡è½½å®šä¹‰å¤šä¸ª reverse çš„å‡½æ•°ç±»å‹ï¼š

```ts
function reverse(x: number): number;
function reverse(x: string): string;
function reverse(x: number | string): number | string | void {
    if (typeof x === 'number') {
        return Number(x.toString().split('').reverse().join(''));
    } else if (typeof x === 'string') {
        return x.split('').reverse().join('');
    }
}
```



#### ç±»å‹æ–­è¨€

ç±»å‹æ–­è¨€ï¼ˆType Assertionï¼‰å¯ä»¥ç”¨æ¥æ‰‹åŠ¨æŒ‡å®šä¸€ä¸ªå€¼çš„ç±»å‹ã€‚

è¯­æ³•[Â§](https://ts.xcatliu.com/basics/type-assertion.html#è¯­æ³•)

```ts
å€¼ as ç±»å‹
```

æˆ–

```ts
<ç±»å‹>å€¼
```

åœ¨ tsx è¯­æ³•ï¼ˆReact çš„ jsx è¯­æ³•çš„ ts ç‰ˆï¼‰ä¸­å¿…é¡»ä½¿ç”¨å‰è€…ï¼Œå³ `å€¼ as ç±»å‹`ã€‚

å½¢å¦‚ `<Foo>` çš„è¯­æ³•åœ¨ tsx ä¸­è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ª `ReactNode`ï¼Œåœ¨ ts ä¸­é™¤äº†è¡¨ç¤ºç±»å‹æ–­è¨€ä¹‹å¤–ï¼Œä¹Ÿå¯èƒ½æ˜¯è¡¨ç¤ºä¸€ä¸ª[æ³›å‹](https://ts.xcatliu.com/advanced/generics.html)ã€‚

æ•…å»ºè®®å¤§å®¶åœ¨ä½¿ç”¨ç±»å‹æ–­è¨€æ—¶ï¼Œç»Ÿä¸€ä½¿ç”¨ `å€¼ as ç±»å‹` è¿™æ ·çš„è¯­æ³•ã€‚

##### ç±»å‹æ–­è¨€çš„ç”¨é€”

- **å°†ä¸€ä¸ªè”åˆç±»å‹æ–­è¨€ä¸ºå…¶ä¸­ä¸€ä¸ªç±»å‹**

  æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ç¡®å®éœ€è¦åœ¨è¿˜ä¸ç¡®å®šç±»å‹çš„æ—¶å€™å°±è®¿é—®å…¶ä¸­ä¸€ä¸ªç±»å‹ç‰¹æœ‰çš„å±æ€§æˆ–æ–¹æ³•ï¼Œæ¯”å¦‚ï¼š

  ```ts
  interface Cat {
      name: string;
      run(): void;
  }
  interface Fish {
      name: string;
      swim(): void;
  }
  
  function isFish(animal: Cat | Fish) {
      if (typeof animal.swim === 'function') {
          return true;
      }
      return false;
  }
  
  // index.ts:11:23 - error TS2339: Property 'swim' does not exist on type 'Cat | Fish'.
  //   Property 'swim' does not exist on type 'Cat'.
  ```

  ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè·å– `animal.swim` çš„æ—¶å€™ä¼šæŠ¥é”™ã€‚

  æ­¤æ—¶å¯ä»¥ä½¿ç”¨ç±»å‹æ–­è¨€ï¼Œå°† `animal` æ–­è¨€æˆ `Fish`ï¼š

  ```ts
  interface Cat {
      name: string;
      run(): void;
  }
  interface Fish {
      name: string;
      swim(): void;
  }
  
  function isFish(animal: Cat | Fish) {
      if (typeof (animal as Fish).swim === 'function') {
          return true;
      }
      return false;
  }
  ```

  è¿™æ ·å°±å¯ä»¥è§£å†³è®¿é—® `animal.swim` æ—¶æŠ¥é”™çš„é—®é¢˜äº†ã€‚

  éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç±»å‹æ–­è¨€åªèƒ½å¤Ÿã€Œ**æ¬ºéª—**ã€TypeScript **ç¼–è¯‘å™¨**ï¼Œæ— æ³•é¿å…è¿è¡Œæ—¶çš„é”™è¯¯ï¼Œåè€Œæ»¥ç”¨ç±»å‹æ–­è¨€å¯èƒ½ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯

  ```ts
  interface Cat {
      name: string;
      run(): void;
  }
  interface Fish {
      name: string;
      swim(): void;
  }
  
  function swim(animal: Cat | Fish) {
      (animal as Fish).swim();
  }
  
  const tom: Cat = {
      name: 'Tom',
      run() { console.log('run') }
  };
  swim(tom);
  ```

  ä¸Šé¢çš„ä¾‹å­ç¼–è¯‘æ—¶ä¸ä¼šæŠ¥é”™ï¼Œä½†åœ¨è¿è¡Œæ—¶ä¼šæŠ¥é”™ï¼š

  ```autoit
  Uncaught TypeError: animal.swim is not a function`
  ```

  åŸå› æ˜¯ `(animal as Fish).swim()` è¿™æ®µä»£ç éšè—äº† `animal` å¯èƒ½ä¸º `Cat` çš„æƒ…å†µï¼Œå°† `animal` ç›´æ¥æ–­è¨€ä¸º `Fish` äº†ï¼Œè€Œ TypeScript ç¼–è¯‘å™¨ä¿¡ä»»äº†æˆ‘ä»¬çš„æ–­è¨€ï¼Œæ•…åœ¨è°ƒç”¨ `swim()` æ—¶æ²¡æœ‰ç¼–è¯‘é”™è¯¯ã€‚

  å¯æ˜¯ `swim` å‡½æ•°æ¥å—çš„å‚æ•°æ˜¯ `Cat | Fish`ï¼Œä¸€æ—¦ä¼ å…¥çš„å‚æ•°æ˜¯ `Cat` ç±»å‹çš„å˜é‡ï¼Œç”±äº `Cat` ä¸Šæ²¡æœ‰ `swim` æ–¹æ³•ï¼Œå°±ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯äº†ã€‚

  æ€»ä¹‹ï¼Œä½¿ç”¨ç±»å‹æ–­è¨€æ—¶ä¸€å®šè¦æ ¼å¤–å°å¿ƒï¼Œå°½é‡é¿å…æ–­è¨€åè°ƒç”¨æ–¹æ³•æˆ–å¼•ç”¨æ·±å±‚å±æ€§ï¼Œä»¥å‡å°‘ä¸å¿…è¦çš„è¿è¡Œæ—¶é”™è¯¯

- **å°†ä¸€ä¸ªçˆ¶ç±»æ–­è¨€ä¸ºæ›´åŠ å…·ä½“çš„å­ç±»**

  ```ts
  interface ApiError extends Error {
      code: number;
  }
  interface HttpError extends Error {
      statusCode: number;
  }
  
  function isApiError(error: Error) {
      if (typeof (error as ApiError).code === 'number') {
          return true;
      }
      return false;
  }
  ```

- **å°†ä»»ä½•ä¸€ä¸ªç±»å‹æ–­è¨€ä¸º `any`**

  ```ts
  window.foo = 1;
  
  // index.ts:1:8 - error TS2339: Property 'foo' does not exist on type 'Window & typeof globalThis'.
  ```

  ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°† `window` ä¸Šæ·»åŠ ä¸€ä¸ªå±æ€§ `foo`ï¼Œä½† TypeScript ç¼–è¯‘æ—¶ä¼šæŠ¥é”™ï¼Œæç¤ºæˆ‘ä»¬ `window` ä¸Šä¸å­˜åœ¨ `foo` å±æ€§ã€‚

  æ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `as any` ä¸´æ—¶å°† `window` æ–­è¨€ä¸º `any` ç±»å‹ï¼š

  ```ts
  (window as any).foo = 1;
  ```

  åœ¨ `any` ç±»å‹çš„å˜é‡ä¸Šï¼Œè®¿é—®ä»»ä½•å±æ€§éƒ½æ˜¯å…è®¸çš„ã€‚

  éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå°†ä¸€ä¸ªå˜é‡æ–­è¨€ä¸º `any` å¯ä»¥è¯´æ˜¯è§£å†³ TypeScript ä¸­ç±»å‹é—®é¢˜çš„æœ€åä¸€ä¸ªæ‰‹æ®µã€‚

  **å®ƒææœ‰å¯èƒ½æ©ç›–äº†çœŸæ­£çš„ç±»å‹é”™è¯¯ï¼Œæ‰€ä»¥å¦‚æœä¸æ˜¯éå¸¸ç¡®å®šï¼Œå°±ä¸è¦ä½¿ç”¨ `as any`ã€‚**

  ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡[æ‰©å±• window çš„ç±»å‹ï¼ˆTODOï¼‰][]è§£å†³è¿™ä¸ªé”™è¯¯ï¼Œä¸è¿‡å¦‚æœåªæ˜¯ä¸´æ—¶çš„å¢åŠ  `foo` å±æ€§ï¼Œ`as any` ä¼šæ›´åŠ æ–¹ä¾¿ã€‚

  æ€»ä¹‹ï¼Œ**ä¸€æ–¹é¢ä¸èƒ½æ»¥ç”¨ `as any`ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿä¸è¦å®Œå…¨å¦å®šå®ƒçš„ä½œç”¨ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç±»å‹çš„ä¸¥æ ¼æ€§å’Œå¼€å‘çš„ä¾¿åˆ©æ€§ä¹‹é—´æŒæ¡å¹³è¡¡**ï¼ˆè¿™ä¹Ÿæ˜¯ [TypeScript çš„è®¾è®¡ç†å¿µ](https://github.com/Microsoft/TypeScript/wiki/TypeScript-Design-Goals)ä¹‹ä¸€ï¼‰ï¼Œæ‰èƒ½å‘æŒ¥å‡º TypeScript æœ€å¤§çš„ä»·å€¼ã€‚

- **å°† `any` æ–­è¨€ä¸ºä¸€ä¸ªå…·ä½“çš„ç±»å‹**

  ä¸¾ä¾‹æ¥è¯´ï¼Œå†å²é—ç•™çš„ä»£ç ä¸­æœ‰ä¸ª `getCacheData`ï¼Œå®ƒçš„è¿”å›å€¼æ˜¯ `any`ï¼š

  ```ts
  function getCacheData(key: string): any {
      return (window as any).cache[key];
  }
  ```

  é‚£ä¹ˆæˆ‘ä»¬åœ¨ä½¿ç”¨å®ƒæ—¶ï¼Œæœ€å¥½èƒ½å¤Ÿå°†è°ƒç”¨äº†å®ƒä¹‹åçš„è¿”å›å€¼æ–­è¨€æˆä¸€ä¸ªç²¾ç¡®çš„ç±»å‹ï¼Œè¿™æ ·å°±æ–¹ä¾¿äº†åç»­çš„æ“ä½œï¼š

  ```ts
  function getCacheData(key: string): any {
      return (window as any).cache[key];
  }
  
  interface Cat {
      name: string;
      run(): void;
  }
  
  const tom = getCacheData('tom') as Cat;
  tom.run();
  ```

  ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨å®Œ `getCacheData` ä¹‹åï¼Œç«‹å³å°†å®ƒæ–­è¨€ä¸º `Cat` ç±»å‹ã€‚è¿™æ ·çš„è¯æ˜ç¡®äº† `tom` çš„ç±»å‹ï¼Œåç»­å¯¹ `tom` çš„è®¿é—®æ—¶å°±æœ‰äº†ä»£ç è¡¥å…¨ï¼Œæé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚

##### ç±»å‹æ–­è¨€çš„é™åˆ¶

```ts
interface Animal {
    name: string;
}
interface Cat {
    name: string;
    run(): void;
}

let tom: Cat = {
    name: 'Tom',
    run: () => { console.log('run') }
};
let animal: Animal = tom;
```

TypeScript æ˜¯**ç»“æ„ç±»å‹ç³»ç»Ÿ**ï¼Œç±»å‹ä¹‹é—´çš„å¯¹æ¯”åªä¼šæ¯”è¾ƒå®ƒä»¬æœ€ç»ˆçš„ç»“æ„ï¼Œè€Œä¼šå¿½ç•¥å®ƒä»¬å®šä¹‰æ—¶çš„å…³ç³»ã€‚

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ`Cat` åŒ…å«äº† `Animal` ä¸­çš„æ‰€æœ‰å±æ€§ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå®ƒè¿˜æœ‰ä¸€ä¸ªé¢å¤–çš„æ–¹æ³• `run`ã€‚TypeScript å¹¶ä¸å…³å¿ƒ `Cat` å’Œ `Animal` ä¹‹é—´å®šä¹‰æ—¶æ˜¯ä»€ä¹ˆå…³ç³»ï¼Œè€Œåªä¼šçœ‹å®ƒä»¬æœ€ç»ˆçš„ç»“æ„æœ‰ä»€ä¹ˆå…³ç³»â€”â€”æ‰€ä»¥å®ƒä¸ `Cat extends Animal` æ˜¯ç­‰ä»·çš„ï¼š

```ts
interface Animal {
    name: string;
}
interface Cat extends Animal {
    run(): void;
}
```

é‚£ä¹ˆä¹Ÿä¸éš¾ç†è§£ä¸ºä»€ä¹ˆ `Cat` ç±»å‹çš„ `tom` å¯ä»¥èµ‹å€¼ç»™ `Animal` ç±»å‹çš„ `animal` äº†â€”â€”å°±åƒé¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥å°†å­ç±»çš„å®ä¾‹èµ‹å€¼ç»™ç±»å‹ä¸ºçˆ¶ç±»çš„å˜é‡ã€‚

æŠŠå®ƒæ¢æˆ TypeScript ä¸­æ›´ä¸“ä¸šçš„è¯´æ³•ï¼Œå³ï¼š`Animal` å…¼å®¹ `Cat`ã€‚

å½“ `Animal` å…¼å®¹ `Cat` æ—¶ï¼Œå®ƒä»¬å°±å¯ä»¥äº’ç›¸è¿›è¡Œç±»å‹æ–­è¨€äº†ï¼š

```ts
interface Animal {
    name: string;
}
interface Cat {
    name: string;
    run(): void;
}

function testAnimal(animal: Animal) {
    return (animal as Cat);
}
function testCat(cat: Cat) {
    return (cat as Animal);
}
```

è¿™æ ·çš„è®¾è®¡å…¶å®ä¹Ÿå¾ˆå®¹æ˜“å°±èƒ½ç†è§£ï¼š

- å…è®¸ `animal as Cat` æ˜¯å› ä¸ºã€Œçˆ¶ç±»å¯ä»¥è¢«æ–­è¨€ä¸ºå­ç±»ã€ï¼Œè¿™ä¸ªå‰é¢å·²ç»å­¦ä¹ è¿‡äº†
- å…è®¸ `cat as Animal` æ˜¯å› ä¸ºæ—¢ç„¶å­ç±»æ‹¥æœ‰çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼Œé‚£ä¹ˆè¢«æ–­è¨€ä¸ºçˆ¶ç±»ï¼Œè·å–çˆ¶ç±»çš„å±æ€§ã€è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œå°±ä¸ä¼šæœ‰ä»»ä½•é—®é¢˜ï¼Œæ•…ã€Œå­ç±»å¯ä»¥è¢«æ–­è¨€ä¸ºçˆ¶ç±»ã€

##### åŒé‡æ–­è¨€

æ—¢ç„¶ï¼š

- ä»»ä½•ç±»å‹éƒ½å¯ä»¥è¢«æ–­è¨€ä¸º any
- any å¯ä»¥è¢«æ–­è¨€ä¸ºä»»ä½•ç±»å‹

é‚£ä¹ˆæ˜¯ä¸æ˜¯å¯ä»¥ä½¿ç”¨åŒé‡æ–­è¨€ `as any as Foo` æ¥å°†ä»»ä½•ä¸€ä¸ªç±»å‹æ–­è¨€ä¸ºä»»ä½•å¦ä¸€ä¸ªç±»å‹å‘¢ï¼Ÿ

```ts
interface Cat {
    run(): void;
}
interface Fish {
    swim(): void;
}

function testCat(cat: Cat) {
    return (cat as any as Fish);
}
```

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè‹¥ç›´æ¥ä½¿ç”¨ `cat as Fish` è‚¯å®šä¼šæŠ¥é”™ï¼Œå› ä¸º `Cat` å’Œ `Fish` äº’ç›¸éƒ½ä¸å…¼å®¹ã€‚

ä½†æ˜¯è‹¥ä½¿ç”¨åŒé‡æ–­è¨€ï¼Œåˆ™å¯ä»¥æ‰“ç ´ã€Œè¦ä½¿å¾— `A` èƒ½å¤Ÿè¢«æ–­è¨€ä¸º `B`ï¼Œåªéœ€è¦ `A` å…¼å®¹ `B` æˆ– `B` å…¼å®¹ `A` å³å¯ã€çš„é™åˆ¶ï¼Œå°†ä»»ä½•ä¸€ä¸ªç±»å‹æ–­è¨€ä¸ºä»»ä½•å¦ä¸€ä¸ªç±»å‹ã€‚

è‹¥ä½ ä½¿ç”¨äº†è¿™ç§åŒé‡æ–­è¨€ï¼Œé‚£ä¹ˆåæœ‰å…«ä¹æ˜¯éå¸¸é”™è¯¯çš„ï¼Œå®ƒå¾ˆå¯èƒ½ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ã€‚

**é™¤éè¿«ä¸å¾—å·²ï¼Œåƒä¸‡åˆ«ç”¨åŒé‡æ–­è¨€**

##### ç±»å‹æ–­è¨€ vs ç±»å‹è½¬æ¢

**ç±»å‹æ–­è¨€åªä¼šå½±å“ TypeScript ç¼–è¯‘æ—¶çš„ç±»å‹**ï¼Œç±»å‹æ–­è¨€è¯­å¥åœ¨ç¼–è¯‘ç»“æœä¸­ä¼šè¢«åˆ é™¤ï¼š

```ts
function toBoolean(something: any): boolean {
    return something as boolean;
}

toBoolean(1);
// è¿”å›å€¼ä¸º 1
```

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå°† `something` æ–­è¨€ä¸º `boolean` è™½ç„¶å¯ä»¥é€šè¿‡ç¼–è¯‘ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œä»£ç åœ¨ç¼–è¯‘åä¼šå˜æˆï¼š

```js
function toBoolean(something) {
    return something;
}

toBoolean(1);
// è¿”å›å€¼ä¸º 1
```

æ‰€ä»¥ç±»å‹æ–­è¨€ä¸æ˜¯ç±»å‹è½¬æ¢ï¼Œå®ƒä¸ä¼šçœŸçš„å½±å“åˆ°å˜é‡çš„ç±»å‹ã€‚

è‹¥è¦è¿›è¡Œç±»å‹è½¬æ¢ï¼Œéœ€è¦ç›´æ¥è°ƒç”¨ç±»å‹è½¬æ¢çš„æ–¹æ³•ï¼š

```ts
function toBoolean(something: any): boolean {
    return Boolean(something);
}

toBoolean(1);
// è¿”å›å€¼ä¸º true
```

>ğŸ‘€ æŒ‰æˆ‘çš„ç†è§£ï¼Œç±»å‹æ–­è¨€ä½œç”¨å°±æ˜¯é¿å…ä¸€äº›ç‰¹å®šçš„æ“ä½œåœ¨ç¼–è¯‘å™¨é‡ŒæŠ¥é”™ï¼Ÿ

##### ç±»å‹æ–­è¨€ vs ç±»å‹å£°æ˜

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š

```ts
function getCacheData(key: string): any {
    return (window as any).cache[key];
}

interface Cat {
    name: string;
    run(): void;
}

const tom = getCacheData('tom') as Cat;
tom.run();
```

æˆ‘ä»¬ä½¿ç”¨ `as Cat` å°† `any` ç±»å‹æ–­è¨€ä¸ºäº† `Cat` ç±»å‹ã€‚

ä½†å®é™…ä¸Šè¿˜æœ‰å…¶ä»–æ–¹å¼å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š

```ts
function getCacheData(key: string): any {
    return (window as any).cache[key];
}

interface Cat {
    name: string;
    run(): void;
}

const tom: Cat = getCacheData('tom');
tom.run();
```

ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ç±»å‹å£°æ˜çš„æ–¹å¼ï¼Œå°† `tom` å£°æ˜ä¸º `Cat`ï¼Œç„¶åå†å°† `any` ç±»å‹çš„ `getCacheData('tom')` èµ‹å€¼ç»™ `Cat` ç±»å‹çš„ `tom`ã€‚

è¿™å’Œç±»å‹æ–­è¨€æ˜¯éå¸¸ç›¸ä¼¼çš„ï¼Œè€Œä¸”äº§ç”Ÿçš„ç»“æœä¹Ÿå‡ ä¹æ˜¯ä¸€æ ·çš„â€”â€”`tom` åœ¨æ¥ä¸‹æ¥çš„ä»£ç ä¸­éƒ½å˜æˆäº† `Cat` ç±»å‹ã€‚

å®ƒä»¬çš„åŒºåˆ«ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªä¾‹å­æ¥ç†è§£ï¼š

```ts
interface Animal {
    name: string;
}
interface Cat {
    name: string;
    run(): void;
}

const animal: Animal = {
    name: 'tom'
};
let tom = animal as Cat;
```

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œç”±äº `Animal` å…¼å®¹ `Cat`ï¼Œæ•…å¯ä»¥å°† `animal` æ–­è¨€ä¸º `Cat` èµ‹å€¼ç»™ `tom`ã€‚

ä½†æ˜¯è‹¥ç›´æ¥å£°æ˜ `tom` ä¸º `Cat` ç±»å‹ï¼š

```ts
interface Animal {
    name: string;
}
interface Cat {
    name: string;
    run(): void;
}

const animal: Animal = {
    name: 'tom'
};
let tom: Cat = animal;

// index.ts:12:5 - error TS2741: Property 'run' is missing in type 'Animal' but required in type 'Cat'.
```

åˆ™ä¼šæŠ¥é”™ï¼Œä¸å…è®¸å°† `animal` èµ‹å€¼ç»™ `Cat` ç±»å‹çš„ `tom`ã€‚

è¿™å¾ˆå®¹æ˜“ç†è§£ï¼Œ`Animal` å¯ä»¥çœ‹ä½œæ˜¯ `Cat` çš„çˆ¶ç±»ï¼Œå½“ç„¶ä¸èƒ½å°†çˆ¶ç±»çš„å®ä¾‹èµ‹å€¼ç»™ç±»å‹ä¸ºå­ç±»çš„å˜é‡ã€‚

æ·±å…¥çš„è®²ï¼Œå®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«å°±åœ¨äºï¼š

- `animal` æ–­è¨€ä¸º `Cat`ï¼Œåªéœ€è¦æ»¡è¶³ `Animal` å…¼å®¹ `Cat` æˆ– `Cat` å…¼å®¹ `Animal` å³å¯
- `animal` èµ‹å€¼ç»™ `tom`ï¼Œéœ€è¦æ»¡è¶³ `Cat` å…¼å®¹ `Animal` æ‰è¡Œ

ä½†æ˜¯ `Cat` å¹¶ä¸å…¼å®¹ `Animal`ã€‚

è€Œåœ¨å‰ä¸€ä¸ªä¾‹å­ä¸­ï¼Œç”±äº `getCacheData('tom')` æ˜¯ `any` ç±»å‹ï¼Œ`any` å…¼å®¹ `Cat`ï¼Œ`Cat` ä¹Ÿå…¼å®¹ `any`ï¼Œæ•…

```ts
const tom = getCacheData('tom') as Cat;
```

ç­‰ä»·äº

```ts
const tom: Cat = getCacheData('tom');
```

çŸ¥é“äº†å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ï¼Œå°±çŸ¥é“äº†ç±»å‹å£°æ˜æ˜¯æ¯”ç±»å‹æ–­è¨€æ›´åŠ ä¸¥æ ¼çš„ã€‚

æ‰€ä»¥ä¸ºäº†å¢åŠ ä»£ç çš„è´¨é‡ï¼Œæˆ‘ä»¬æœ€å¥½ä¼˜å…ˆä½¿ç”¨ç±»å‹å£°æ˜ï¼Œè¿™ä¹Ÿæ¯”ç±»å‹æ–­è¨€çš„ `as` è¯­æ³•æ›´åŠ ä¼˜é›…ã€‚

#### ç±»å‹æ–­è¨€ vs æ³›å‹

> æœ¬å°èŠ‚çš„å‰ç½®çŸ¥è¯†ç‚¹ï¼š[æ³›å‹](https://ts.xcatliu.com/advanced/generics.html)

è¿˜æ˜¯è¿™ä¸ªä¾‹å­ï¼š

```ts
function getCacheData(key: string): any {
    return (window as any).cache[key];
}

interface Cat {
    name: string;
    run(): void;
}

const tom = getCacheData('tom') as Cat;
tom.run();
```

æˆ‘ä»¬è¿˜æœ‰ç¬¬ä¸‰ç§æ–¹å¼å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯æ³›å‹ï¼š

```ts
function getCacheData<T>(key: string): T {
    return (window as any).cache[key];
}

interface Cat {
    name: string;
    run(): void;
}

const tom = getCacheData<Cat>('tom');
tom.run();
```

é€šè¿‡ç»™ `getCacheData` å‡½æ•°æ·»åŠ äº†ä¸€ä¸ªæ³›å‹ `<T>`ï¼Œæˆ‘ä»¬å¯ä»¥æ›´åŠ è§„èŒƒçš„å®ç°å¯¹ `getCacheData` è¿”å›å€¼çš„çº¦æŸï¼Œè¿™ä¹ŸåŒæ—¶å»é™¤æ‰äº†ä»£ç ä¸­çš„ `any`ï¼Œæ˜¯æœ€ä¼˜çš„ä¸€ä¸ªè§£å†³æ–¹æ¡ˆã€‚

#### æ³›å‹

æ³›å‹ï¼ˆGenericsï¼‰æ˜¯æŒ‡åœ¨å®šä¹‰å‡½æ•°ã€æ¥å£æˆ–ç±»çš„æ—¶å€™ï¼Œä¸é¢„å…ˆæŒ‡å®šå…·ä½“çš„ç±»å‹ï¼Œè€Œåœ¨ä½¿ç”¨çš„æ—¶å€™å†æŒ‡å®šç±»å‹çš„ä¸€ç§ç‰¹æ€§ã€‚

```typescript
function createArray<T>(length: number, value: T): Array<T> {
  let result: Array<T> = []
  for (let i = 0; i < length; i++) {
    result[i] = value
  }
  return result
}
console.log(createArray<string>(3, '1'))

// å®šä¹‰æ³›å‹çš„æ—¶å€™ï¼Œå¯ä»¥ä¸€æ¬¡å®šä¹‰å¤šä¸ªç±»å‹å‚æ•°ï¼š
function swap<T, U>(tuple: [T, U]): [U, T] {
  return [tuple[1], tuple[0]]
}
swap([7, 'seven']) // ['seven', 7]

// æ³›å‹çº¦æŸ
interface hasLength {
  length: number
}

function getLength<T extends hasLength>(arg: T): number {
  console.log(arg.length)
  return arg.length
}

getLength([1, 2])

// å¤šä¸ªç±»å‹å‚æ•°ä¹‹é—´ä¹Ÿå¯ä»¥äº’ç›¸çº¦æŸï¼š
// Tç»§æ‰¿Uï¼Œè¿™æ ·Uä¸­è‹¥æœ‰Tä¸­æ²¡æœ‰çš„å±æ€§ï¼Œå°±ä¼šæŠ¥é”™  (å…¶å®å¯ä»¥è¯´æˆ Tä¸­è‹¥æ²¡æœ‰åŒ…å«Uä¸­æ‰€æœ‰çš„å±æ€§)
function copyFields<T extends U, U>(target: T, source: U): T {
  for (let id in source) {
    target[id] = (<T>source)[id]
  }
  return target
}

let x = { a: 1, b: 2, c: 3, d: 4 }

copyFields(x, { b: 10, d: 20 })

// æ³›å‹æ¥å£
interface CreateArrayFunc<T> {
  (length: number, value: T): Array<T>
}
let createArray1: CreateArrayFunc<any>
createArray1 = function <T>(length: number, value: T): Array<T> {
  let result: Array<T> = []
  for (let i = 0; i < length; i++) {
    result[i] = value
  }
  return result
}

// æ³›å‹ç±»
class GenericNumber<T> {
  zeroValue: T
  add: (x: T, y: T) => T
}

let myGenericNumber = new GenericNumber<number>()
myGenericNumber.zeroValue = 0
myGenericNumber.add = function (x, y) {
  return x + y
}

// æ³›å‹å‚æ•°çš„é»˜è®¤ç±»å‹
function createArray2<T = string>(length: number, value: T): Array<T> {
  let result: T[] = []
  for (let i = 0; i < length; i++) {
    result[i] = value
  }
  return result
}
```

#### å£°æ˜æ–‡ä»¶

å½“ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å¼•ç”¨å®ƒçš„å£°æ˜æ–‡ä»¶ï¼Œæ‰èƒ½è·å¾—å¯¹åº”çš„ä»£ç è¡¥å…¨ã€æ¥å£æç¤ºç­‰åŠŸèƒ½ã€‚

é€šå¸¸æˆ‘ä»¬ä¼šæŠŠå£°æ˜è¯­å¥æ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ï¼ˆ`jQuery.d.ts`ï¼‰ä¸­ï¼Œè¿™å°±æ˜¯å£°æ˜æ–‡ä»¶ã€‚å£°æ˜æ–‡ä»¶å¿…éœ€ä»¥ `.d.ts` ä¸ºåç¼€ã€‚

ä¸€èˆ¬æ¥è¯´ï¼Œts ä¼šè§£æé¡¹ç›®ä¸­æ‰€æœ‰çš„ `*.ts` æ–‡ä»¶ï¼Œå½“ç„¶ä¹ŸåŒ…å«ä»¥ `.d.ts` ç»“å°¾çš„æ–‡ä»¶ã€‚æ‰€ä»¥å½“æˆ‘ä»¬å°† `jQuery.d.ts` æ”¾åˆ°é¡¹ç›®ä¸­æ—¶ï¼Œå…¶ä»–æ‰€æœ‰ `*.ts` æ–‡ä»¶å°±éƒ½å¯ä»¥è·å¾— `jQuery` çš„ç±»å‹å®šä¹‰äº†ã€‚

å‡å¦‚ä»ç„¶æ— æ³•è§£æï¼Œé‚£ä¹ˆå¯ä»¥æ£€æŸ¥ä¸‹ `tsconfig.json` ä¸­çš„ `files`ã€`include` å’Œ `exclude` é…ç½®ï¼Œç¡®ä¿å…¶åŒ…å«äº† `jQuery.d.ts` æ–‡ä»¶ã€‚

- ç¬¬ä¸‰æ–¹å£°æ˜æ–‡ä»¶

  å½“ç„¶ï¼ŒjQuery çš„å£°æ˜æ–‡ä»¶ä¸éœ€è¦æˆ‘ä»¬å®šä¹‰äº†ï¼Œç¤¾åŒºå·²ç»å¸®æˆ‘ä»¬å®šä¹‰å¥½äº†ï¼š[jQuery in DefinitelyTyped](https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/jquery/index.d.ts)ã€‚

  æˆ‘ä»¬å¯ä»¥ç›´æ¥ä¸‹è½½ä¸‹æ¥ä½¿ç”¨ï¼Œä½†æ˜¯æ›´æ¨èçš„æ˜¯ä½¿ç”¨ `@types` ç»Ÿä¸€ç®¡ç†ç¬¬ä¸‰æ–¹åº“çš„å£°æ˜æ–‡ä»¶ã€‚

  `@types` çš„ä½¿ç”¨æ–¹å¼å¾ˆç®€å•ï¼Œç›´æ¥ç”¨ npm å®‰è£…å¯¹åº”çš„å£°æ˜æ¨¡å—å³å¯ï¼Œä»¥ jQuery ä¸¾ä¾‹ï¼š

  ```bash
  npm install @types/jquery --save-dev
  ```

  å¯ä»¥åœ¨[è¿™ä¸ªé¡µé¢](https://microsoft.github.io/TypeSearch/)æœç´¢ä½ éœ€è¦çš„å£°æ˜æ–‡ä»¶ã€‚

##### ä¹¦å†™å£°æ˜æ–‡ä»¶

å½“ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“æ²¡æœ‰æä¾›å£°æ˜æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦è‡ªå·±ä¹¦å†™å£°æ˜æ–‡ä»¶äº†ã€‚

ä½¿ç”¨åœºæ™¯ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§

- [å…¨å±€å˜é‡](https://ts.xcatliu.com/basics/declaration-files.html#quan-ju-bian-liang)ï¼šé€šè¿‡ `<script>` æ ‡ç­¾å¼•å…¥ç¬¬ä¸‰æ–¹åº“ï¼Œæ³¨å…¥å…¨å±€å˜é‡
- [npm åŒ…](https://ts.xcatliu.com/basics/declaration-files.html#npm-bao)ï¼šé€šè¿‡ `import foo from 'foo'` å¯¼å…¥ï¼Œç¬¦åˆ ES6 æ¨¡å—è§„èŒƒ
- [UMD åº“](https://ts.xcatliu.com/basics/declaration-files.html#umd-ku)ï¼šæ—¢å¯ä»¥é€šè¿‡ `<script>` æ ‡ç­¾å¼•å…¥ï¼Œåˆå¯ä»¥é€šè¿‡ `import` å¯¼å…¥
- [ç›´æ¥æ‰©å±•å…¨å±€å˜é‡](https://ts.xcatliu.com/basics/declaration-files.html#zhi-jie-kuo-zhan-quan-ju-bian-liang)ï¼šé€šè¿‡ `<script>` æ ‡ç­¾å¼•å…¥åï¼Œæ”¹å˜ä¸€ä¸ªå…¨å±€å˜é‡çš„ç»“æ„
- [åœ¨ npm åŒ…æˆ– UMD åº“ä¸­æ‰©å±•å…¨å±€å˜é‡](https://ts.xcatliu.com/basics/declaration-files.html#zai-npm-bao-huo-umd-ku-zhong-kuo-zhan-quan-ju-bian-liang)ï¼šå¼•ç”¨ npm åŒ…æˆ– UMD åº“åï¼Œæ”¹å˜ä¸€ä¸ªå…¨å±€å˜é‡çš„ç»“æ„
- [æ¨¡å—æ’ä»¶](https://ts.xcatliu.com/basics/declaration-files.html#mo-kuai-cha-jian)ï¼šé€šè¿‡ `<script>` æˆ– `import` å¯¼å…¥åï¼Œæ”¹å˜å¦ä¸€ä¸ªæ¨¡å—çš„ç»“æ„

##### å…¨å±€å˜é‡

>æ³¨ï¼šéƒ½åªèƒ½ç”¨æ¥å®šä¹‰ç±»å‹ï¼Œä¸èƒ½ç”¨æ¥å®šä¹‰å…·ä½“çš„å®ç°

å…¨å±€å˜é‡æ˜¯æœ€ç®€å•çš„åœºæ™¯ï¼Œæœ€ä¸Šé¢â¬†ï¸ä¸¾çš„ä¾‹å­å°±æ˜¯å…¨å±€å˜é‡

ä½¿ç”¨å…¨å±€å˜é‡çš„å£°æ˜æ–‡ä»¶æ—¶ï¼Œå¦‚æœæ˜¯ä»¥ `npm install @types/xxx --save-dev` å®‰è£…çš„ï¼Œåˆ™ä¸éœ€è¦ä»»ä½•é…ç½®ã€‚å¦‚æœæ˜¯å°†å£°æ˜æ–‡ä»¶ç›´æ¥å­˜æ”¾äºå½“å‰é¡¹ç›®ä¸­ï¼Œåˆ™å»ºè®®å’Œå…¶ä»–æºç ä¸€èµ·æ”¾åˆ° `src` ç›®å½•ä¸‹

ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§è¯­æ³•ï¼š

- [`declare var`](https://ts.xcatliu.com/basics/declaration-files.html#declare-var) å£°æ˜å…¨å±€å˜é‡
- [`declare function`](https://ts.xcatliu.com/basics/declaration-files.html#declare-function) å£°æ˜å…¨å±€æ–¹æ³•
- [`declare class`](https://ts.xcatliu.com/basics/declaration-files.html#declare-class) å£°æ˜å…¨å±€ç±»
- [`declare enum`](https://ts.xcatliu.com/basics/declaration-files.html#declare-enum) å£°æ˜å…¨å±€æšä¸¾ç±»å‹
- [`declare namespace`](https://ts.xcatliu.com/basics/declaration-files.html#declare-namespace) å£°æ˜ï¼ˆå«æœ‰å­å±æ€§çš„ï¼‰å…¨å±€å¯¹è±¡
- [`interface type`](https://ts.xcatliu.com/basics/declaration-files.html#interface-he-type) å£°æ˜å…¨å±€ç±»å‹

**declare var**

è¿˜æœ‰ `declare let` å’Œ `declare const`ï¼Œä½¿ç”¨ `let` ä¸ä½¿ç”¨ `var` æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼š

```ts
// src/jQuery.d.ts
declare let jQuery: (selector: string) => any;
// src/index.ts

jQuery('#foo');
// ä½¿ç”¨ declare let å®šä¹‰çš„ jQuery ç±»å‹ï¼Œå…è®¸ä¿®æ”¹è¿™ä¸ªå…¨å±€å˜é‡ ï¼Œconståˆ™ä¸å…è®¸
jQuery = function(selector) {
    return document.querySelector(selector);
};
```

**ä¸€èˆ¬æ¥è¯´ï¼Œå…¨å±€å˜é‡éƒ½æ˜¯ç¦æ­¢ä¿®æ”¹çš„å¸¸é‡ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†æƒ…å†µéƒ½åº”è¯¥ä½¿ç”¨ `const` è€Œä¸æ˜¯ `var` æˆ– `let`ã€‚**

**declare function**

`declare function` ç”¨æ¥å®šä¹‰å…¨å±€å‡½æ•°çš„ç±»å‹ã€‚jQuery å…¶å®å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç”¨ `function` æ¥å®šä¹‰ï¼š

```ts
// src/jQuery.d.ts

declare function jQuery(selector: string): any;
// src/index.ts

jQuery('#foo');
```

åœ¨å‡½æ•°ç±»å‹çš„å£°æ˜è¯­å¥ä¸­ï¼Œå‡½æ•°é‡è½½ä¹Ÿæ˜¯æ”¯æŒçš„ï¼š

```ts
// src/jQuery.d.ts

declare function jQuery(selector: string): any;
declare function jQuery(domReadyCallback: () => any): any;
```

**declare class**

```ts
// src/Animal.d.ts
declare class Animal {
    name: string;
    constructor(name: string);
    sayHi(): string;
}
```

```ts
// src/index.ts
let cat = new Animal('Tom');
```

**declare enum**

```ts
// src/Directions.d.ts
declare enum Directions {
    Up,
    Down,
    Left,
    Right
}
```

```ts
// src/index.ts
let directions = [Directions.Up, Directions.Down, Directions.Left, Directions.Right];
```

**declare namespace**

>ç”¨æ¥è¡¨ç¤ºå…¨å±€å˜é‡æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«å¾ˆå¤šå­å±æ€§

`namespace` æ˜¯ ts æ—©æœŸæ—¶ä¸ºäº†è§£å†³æ¨¡å—åŒ–è€Œåˆ›é€ çš„å…³é”®å­—ï¼Œä¸­æ–‡ç§°ä¸ºå‘½åç©ºé—´ã€‚

ç”±äºå†å²é—ç•™åŸå› ï¼Œåœ¨æ—©æœŸè¿˜æ²¡æœ‰ ES6 çš„æ—¶å€™ï¼Œts æä¾›äº†ä¸€ç§æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œä½¿ç”¨ `module` å…³é”®å­—è¡¨ç¤ºå†…éƒ¨æ¨¡å—ã€‚ä½†ç”±äºåæ¥ ES6 ä¹Ÿä½¿ç”¨äº† `module` å…³é”®å­—ï¼Œts ä¸ºäº†å…¼å®¹ ES6ï¼Œä½¿ç”¨ `namespace` æ›¿ä»£äº†è‡ªå·±çš„ `module`ï¼Œæ›´åä¸ºå‘½åç©ºé—´ã€‚

éšç€ ES6 çš„å¹¿æ³›åº”ç”¨ï¼Œç°åœ¨å·²ç»ä¸å»ºè®®å†ä½¿ç”¨ ts ä¸­çš„ `namespace`ï¼Œè€Œæ¨èä½¿ç”¨ ES6 çš„æ¨¡å—åŒ–æ–¹æ¡ˆäº†ï¼Œæ•…æˆ‘ä»¬ä¸å†éœ€è¦å­¦ä¹  `namespace` çš„ä½¿ç”¨äº†ã€‚

`namespace` è¢«æ·˜æ±°äº†ï¼Œä½†æ˜¯åœ¨å£°æ˜æ–‡ä»¶ä¸­ï¼Œ`declare namespace` è¿˜æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ï¼Œå®ƒç”¨æ¥è¡¨ç¤ºå…¨å±€å˜é‡æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«å¾ˆå¤šå­å±æ€§ã€‚

æ¯”å¦‚ `jQuery` æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæä¾›äº†ä¸€ä¸ª `jQuery.ajax` æ–¹æ³•å¯ä»¥è°ƒç”¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åº”è¯¥ä½¿ç”¨ `declare namespace jQuery` æ¥å£°æ˜è¿™ä¸ªæ‹¥æœ‰å¤šä¸ªå­å±æ€§çš„å…¨å±€å˜é‡ã€‚

```ts
// src/jQuery.d.ts
declare namespace jQuery {
    function ajax(url: string, settings?: any): void;
}

// src/index.ts
jQuery.ajax('/api/get_something');
```

æ³¨æ„ï¼Œåœ¨ `declare namespace` å†…éƒ¨ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ `function ajax` æ¥å£°æ˜å‡½æ•°ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ `declare function ajax`ã€‚ç±»ä¼¼çš„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ `const`, `class`, `enum` ç­‰è¯­å¥

**åµŒå¥—çš„å‘½åç©ºé—´**

å¦‚æœå¯¹è±¡æ‹¥æœ‰æ·±å±‚çš„å±‚çº§ï¼Œåˆ™éœ€è¦ç”¨åµŒå¥—çš„ `namespace` æ¥å£°æ˜æ·±å±‚çš„å±æ€§çš„ç±»å‹ï¼š

```ts
// src/jQuery.d.ts
declare namespace jQuery {
    function ajax(url: string, settings?: any): void;
    namespace fn {
        function extend(object: any): void;
    }
}

// src/index.ts
jQuery.ajax('/api/get_something');
jQuery.fn.extend({
    check: function() {
        return this.each(function() {
            this.checked = true;
        });
    }
});
```

å‡å¦‚ `jQuery` ä¸‹ä»…æœ‰ `fn` è¿™ä¸€ä¸ªå±æ€§ï¼ˆæ²¡æœ‰ `ajax` ç­‰å…¶ä»–å±æ€§æˆ–æ–¹æ³•ï¼‰ï¼Œåˆ™å¯ä»¥ä¸éœ€è¦åµŒå¥— `namespace`ï¼š

```ts
// src/jQuery.d.ts
declare namespace jQuery.fn {
    function extend(object: any): void;
}

// src/index.ts
jQuery.fn.extend({
    check: function() {
        return this.each(function() {
            this.checked = true;
        });
    }
});
```

**`interface` å’Œ `type`**

é™¤äº†å…¨å±€å˜é‡ä¹‹å¤–ï¼Œå¯èƒ½æœ‰ä¸€äº›ç±»å‹æˆ‘ä»¬ä¹Ÿå¸Œæœ›èƒ½æš´éœ²å‡ºæ¥ã€‚åœ¨ç±»å‹å£°æ˜æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ `interface` æˆ– `type` æ¥å£°æ˜ä¸€ä¸ªå…¨å±€çš„æ¥å£æˆ–ç±»å‹ï¼š

```ts
// src/jQuery.d.ts
interface AjaxSettings {
    method?: 'GET' | 'POST'
    data?: any;
}
```

æš´éœ²åœ¨æœ€å¤–å±‚çš„ `interface` æˆ– `type` ä¼šä½œä¸ºå…¨å±€ç±»å‹ä½œç”¨äºæ•´ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥å°½å¯èƒ½çš„å‡å°‘å…¨å±€å˜é‡æˆ–å…¨å±€ç±»å‹çš„æ•°é‡ï¼Œä¸ºäº†é˜²æ­¢**å‘½åå†²çª**ï¼Œæ•…æœ€å¥½å°†ä»–ä»¬æ”¾åˆ° `namespace` ä¸‹ï¼š

```ts
// src/jQuery.d.ts
declare namespace jQuery {
    interface AjaxSettings {
        method?: 'GET' | 'POST'
        data?: any;
    }
    function ajax(url: string, settings?: AjaxSettings): void;
}
```

æ³¨æ„ï¼Œåœ¨ä½¿ç”¨è¿™ä¸ª `interface` çš„æ—¶å€™ï¼Œä¹Ÿåº”è¯¥åŠ ä¸Š `jQuery` å‰ç¼€ï¼š

```ts
// src/index.ts
let settings: jQuery.AjaxSettings = {
    method: 'POST',
    data: {
        name: 'foo'
    }
};
jQuery.ajax('/api/post_something', settings);
```

**å£°æ˜åˆå¹¶**

å‡å¦‚ jQuery æ—¢æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥ç›´æ¥è¢«è°ƒç”¨ `jQuery('#foo')`ï¼Œåˆæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ‹¥æœ‰å­å±æ€§ `jQuery.ajax()`ï¼ˆäº‹å®ç¡®å®å¦‚æ­¤ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç»„åˆå¤šä¸ªå£°æ˜è¯­å¥ï¼Œå®ƒä»¬ä¼šä¸å†²çªçš„åˆå¹¶èµ·æ¥ï¼š

```ts
// src/jQuery.d.ts
declare function jQuery(selector: string): any;
declare namespace jQuery {
    function ajax(url: string, settings?: any): void;
}

// src/index.ts
jQuery('#foo');
jQuery.ajax('/api/get_something');
```

##### npm

ä¸€èˆ¬æˆ‘ä»¬é€šè¿‡ `import foo from 'foo'` å¯¼å…¥ä¸€ä¸ª npm åŒ…ï¼Œè¿™æ˜¯ç¬¦åˆ ES6 æ¨¡å—è§„èŒƒçš„ã€‚

åœ¨æˆ‘ä»¬å°è¯•ç»™ä¸€ä¸ª npm åŒ…åˆ›å»ºå£°æ˜æ–‡ä»¶ä¹‹å‰ï¼Œéœ€è¦å…ˆçœ‹çœ‹å®ƒçš„å£°æ˜æ–‡ä»¶æ˜¯å¦å·²ç»å­˜åœ¨ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œnpm åŒ…çš„å£°æ˜æ–‡ä»¶å¯èƒ½å­˜åœ¨äºä¸¤ä¸ªåœ°æ–¹ï¼š

1. ä¸è¯¥ npm åŒ…ç»‘å®šåœ¨ä¸€èµ·ã€‚åˆ¤æ–­ä¾æ®æ˜¯ `package.json` ä¸­æœ‰ `types` å­—æ®µï¼Œæˆ–è€…æœ‰ä¸€ä¸ª `index.d.ts` å£°æ˜æ–‡ä»¶ã€‚è¿™ç§æ¨¡å¼ä¸éœ€è¦é¢å¤–å®‰è£…å…¶ä»–åŒ…ï¼Œæ˜¯æœ€ä¸ºæ¨èçš„ï¼Œæ‰€ä»¥ä»¥åæˆ‘ä»¬è‡ªå·±åˆ›å»º npm åŒ…çš„æ—¶å€™ï¼Œæœ€å¥½ä¹Ÿå°†å£°æ˜æ–‡ä»¶ä¸ npm åŒ…ç»‘å®šåœ¨ä¸€èµ·ã€‚
2. å‘å¸ƒåˆ° `@types` é‡Œã€‚æˆ‘ä»¬åªéœ€è¦å°è¯•å®‰è£…ä¸€ä¸‹å¯¹åº”çš„ `@types` åŒ…å°±çŸ¥é“æ˜¯å¦å­˜åœ¨è¯¥å£°æ˜æ–‡ä»¶ï¼Œå®‰è£…å‘½ä»¤æ˜¯ `npm install @types/foo --save-dev`ã€‚è¿™ç§æ¨¡å¼ä¸€èˆ¬æ˜¯ç”±äº npm åŒ…çš„ç»´æŠ¤è€…æ²¡æœ‰æä¾›å£°æ˜æ–‡ä»¶ï¼Œæ‰€ä»¥åªèƒ½ç”±å…¶ä»–äººå°†å£°æ˜æ–‡ä»¶å‘å¸ƒåˆ° `@types` é‡Œäº†ã€‚

å‡å¦‚ä»¥ä¸Šä¸¤ç§æ–¹å¼éƒ½æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„å£°æ˜æ–‡ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦è‡ªå·±ä¸ºå®ƒå†™å£°æ˜æ–‡ä»¶äº†ã€‚ç”±äºæ˜¯é€šè¿‡ `import` è¯­å¥å¯¼å…¥çš„æ¨¡å—ï¼Œæ‰€ä»¥å£°æ˜æ–‡ä»¶å­˜æ”¾çš„ä½ç½®ä¹Ÿæœ‰æ‰€çº¦æŸï¼Œä¸€èˆ¬æœ‰ä¸¤ç§æ–¹æ¡ˆï¼š

1. åˆ›å»ºä¸€ä¸ª `node_modules/@types/foo/index.d.ts` æ–‡ä»¶ï¼Œå­˜æ”¾ `foo` æ¨¡å—çš„å£°æ˜æ–‡ä»¶ã€‚è¿™ç§æ–¹å¼ä¸éœ€è¦é¢å¤–çš„é…ç½®ï¼Œä½†æ˜¯ `node_modules` ç›®å½•ä¸ç¨³å®šï¼Œä»£ç ä¹Ÿæ²¡æœ‰è¢«ä¿å­˜åˆ°ä»“åº“ä¸­ï¼Œæ— æ³•å›æº¯ç‰ˆæœ¬ï¼Œæœ‰ä¸å°å¿ƒè¢«åˆ é™¤çš„é£é™©ï¼Œæ•…ä¸å¤ªå»ºè®®ç”¨è¿™ç§æ–¹æ¡ˆï¼Œä¸€èˆ¬åªç”¨ä½œä¸´æ—¶æµ‹è¯•ã€‚
2. åˆ›å»ºä¸€ä¸ª `types` ç›®å½•ï¼Œä¸“é—¨ç”¨æ¥ç®¡ç†è‡ªå·±å†™çš„å£°æ˜æ–‡ä»¶ï¼Œå°† `foo` çš„å£°æ˜æ–‡ä»¶æ”¾åˆ° `types/foo/index.d.ts` ä¸­ã€‚è¿™ç§æ–¹å¼éœ€è¦é…ç½®ä¸‹ `tsconfig.json` ä¸­çš„ `paths` å’Œ `baseUrl` å­—æ®µã€‚

ç›®å½•ç»“æ„ï¼š

```autoit
/path/to/project
â”œâ”€â”€ src
|  â””â”€â”€ index.ts
â”œâ”€â”€ types
|  â””â”€â”€ foo
|     â””â”€â”€ index.d.ts
â””â”€â”€ tsconfig.json
```

`tsconfig.json` å†…å®¹ï¼š

```json
{
    "compilerOptions": {
        "module": "commonjs",
        "baseUrl": "./",
        "paths": {
            "*": ["types/*"]
        }
    }
}
```

å¦‚æ­¤é…ç½®ä¹‹åï¼Œé€šè¿‡ `import` å¯¼å…¥ `foo` çš„æ—¶å€™ï¼Œä¹Ÿä¼šå» `types` ç›®å½•ä¸‹å¯»æ‰¾å¯¹åº”çš„æ¨¡å—çš„å£°æ˜æ–‡ä»¶äº†ã€‚

npm åŒ…çš„å£°æ˜æ–‡ä»¶ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§è¯­æ³•ï¼š

- [`export`](https://ts.xcatliu.com/basics/declaration-files.html#export) å¯¼å‡ºå˜é‡
- [`export namespace`](https://ts.xcatliu.com/basics/declaration-files.html#export-namespace) å¯¼å‡ºï¼ˆå«æœ‰å­å±æ€§çš„ï¼‰å¯¹è±¡
- [`export default`](https://ts.xcatliu.com/basics/declaration-files.html#export-default) ES6 é»˜è®¤å¯¼å‡º
- [`export =`](https://ts.xcatliu.com/basics/declaration-files.html#export-1) commonjs å¯¼å‡ºæ¨¡å—

**export**

npm åŒ…çš„å£°æ˜æ–‡ä»¶ä¸å…¨å±€å˜é‡çš„å£°æ˜æ–‡ä»¶æœ‰å¾ˆå¤§åŒºåˆ«ã€‚åœ¨ npm åŒ…çš„å£°æ˜æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨ `declare` ä¸å†ä¼šå£°æ˜ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œè€Œåªä¼šåœ¨å½“å‰æ–‡ä»¶ä¸­å£°æ˜ä¸€ä¸ª**å±€éƒ¨å˜é‡**ã€‚åªæœ‰åœ¨å£°æ˜æ–‡ä»¶ä¸­ä½¿ç”¨ `export` **å¯¼å‡º**ï¼Œç„¶ååœ¨ä½¿ç”¨æ–¹ `import` å¯¼å…¥åï¼Œæ‰ä¼šåº”ç”¨åˆ°è¿™äº›ç±»å‹å£°æ˜ã€‚

```ts
// types/foo/index.d.ts
export const name: string;
export function getName(): string;
export class Animal {
    constructor(name: string);
    sayHi(): string;
}
export enum Directions {
    Up,
    Down,
    Left,
    Right
}
export interface Options {
    data: any;
}
```

ä¹Ÿå¯ä»¥ä½¿ç”¨ `declare` å…ˆå£°æ˜å¤šä¸ªå˜é‡ï¼Œæœ€åå†ç”¨ `export` ä¸€æ¬¡æ€§å¯¼å‡ºã€‚ä¸Šä¾‹çš„å£°æ˜æ–‡ä»¶å¯ä»¥ç­‰ä»·çš„æ”¹å†™ä¸ºï¼š

```ts
// types/foo/index.d.ts
declare const name: string;
declare function getName(): string;
declare class Animal {
    constructor(name: string);
    sayHi(): string;
}
declare enum Directions {
    Up,
    Down,
    Left,
    Right
}
interface Options {
    data: any;
}

export { name, getName, Animal, Directions, Options };
```

æ³¨æ„ï¼Œä¸å…¨å±€å˜é‡çš„å£°æ˜æ–‡ä»¶ç±»ä¼¼ï¼Œ`interface` å‰æ˜¯ä¸éœ€è¦ `declare` çš„ã€‚

**export namespace**

ä¸ `declare namespace` ç±»ä¼¼ï¼Œ`export namespace` ç”¨æ¥å¯¼å‡ºä¸€ä¸ªæ‹¥æœ‰å­å±æ€§çš„å¯¹è±¡[17](https://github.com/xcatliu/typescript-tutorial/tree/master/examples/declaration-files/17-export-namespace)ï¼š

```ts
// types/foo/index.d.ts
export namespace foo {
    const name: string;
    namespace bar {
        function baz(): string;
    }
}

// src/index.ts
import { foo } from 'foo';

console.log(foo.name);
foo.bar.baz();
```

**export default**

åœ¨ ES6 æ¨¡å—ç³»ç»Ÿä¸­ï¼Œä½¿ç”¨ `export default` å¯ä»¥å¯¼å‡ºä¸€ä¸ªé»˜è®¤å€¼ï¼Œä½¿ç”¨æ–¹å¯ä»¥ç”¨ `import foo from 'foo'` è€Œä¸æ˜¯ `import { foo } from 'foo'` æ¥å¯¼å…¥è¿™ä¸ªé»˜è®¤å€¼ã€‚

åœ¨ç±»å‹å£°æ˜æ–‡ä»¶ä¸­ï¼Œ`export default` ç”¨æ¥å¯¼å‡ºé»˜è®¤å€¼çš„ç±»å‹ï¼š

```ts
// types/foo/index.d.ts
export default function foo(): string;

// src/index.ts
import foo from 'foo';
foo();
```

æ³¨æ„ï¼Œåªæœ‰ `function`ã€`class` å’Œ `interface` å¯ä»¥ç›´æ¥é»˜è®¤å¯¼å‡ºï¼Œå…¶ä»–çš„å˜é‡éœ€è¦å…ˆå®šä¹‰å‡ºæ¥ï¼Œå†é»˜è®¤å¯¼å‡ºï¼š

```ts
// types/foo/index.d.ts
declare enum Directions {
    Up,
    Down,
    Left,
    Right
}

export default Directions;
```

é’ˆå¯¹è¿™ç§é»˜è®¤å¯¼å‡ºï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šå°†å¯¼å‡ºè¯­å¥æ”¾åœ¨æ•´ä¸ªå£°æ˜æ–‡ä»¶çš„æœ€å‰é¢

**export =**

åœ¨ **commonjs** è§„èŒƒä¸­ï¼Œæˆ‘ä»¬ç”¨ä»¥ä¸‹æ–¹å¼æ¥å¯¼å‡ºä¸€ä¸ªæ¨¡å—ï¼š

```js
// æ•´ä½“å¯¼å‡º
module.exports = foo;
// å•ä¸ªå¯¼å‡º
exports.bar = bar;
```

åœ¨ ts ä¸­ï¼Œé’ˆå¯¹è¿™ç§æ¨¡å—å¯¼å‡ºï¼Œæœ‰å¤šç§æ–¹å¼å¯ä»¥å¯¼å…¥ï¼Œç¬¬ä¸€ç§æ–¹å¼æ˜¯ `const ... = require`ï¼š

```js
// æ•´ä½“å¯¼å…¥
const foo = require('foo');
// å•ä¸ªå¯¼å…¥
const bar = require('foo').bar;
```

ç¬¬äºŒç§æ–¹å¼æ˜¯ `import ... from`ï¼Œæ³¨æ„é’ˆå¯¹æ•´ä½“å¯¼å‡ºï¼Œéœ€è¦ä½¿ç”¨ `import * as` æ¥å¯¼å…¥ï¼š

```ts
// æ•´ä½“å¯¼å…¥
import * as foo from 'foo';
// å•ä¸ªå¯¼å…¥
import { bar } from 'foo';
```

ç¬¬ä¸‰ç§æ–¹å¼æ˜¯ `import ... require`ï¼Œè¿™ä¹Ÿæ˜¯ ts å®˜æ–¹æ¨èçš„æ–¹å¼ï¼š

```ts
// æ•´ä½“å¯¼å…¥
import foo = require('foo');
// å•ä¸ªå¯¼å…¥
import bar = foo.bar;
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šä¾‹ä¸­ä½¿ç”¨äº† `export =` ä¹‹åï¼Œå°±ä¸èƒ½å†å•ä¸ªå¯¼å‡º `export { bar }` äº†ã€‚æ‰€ä»¥æˆ‘ä»¬é€šè¿‡å£°æ˜åˆå¹¶ï¼Œä½¿ç”¨ `declare namespace foo` æ¥å°† `bar` åˆå¹¶åˆ° `foo` é‡Œã€‚

å‡†ç¡®åœ°è®²ï¼Œ`export =` ä¸ä»…å¯ä»¥ç”¨åœ¨å£°æ˜æ–‡ä»¶ä¸­ï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨æ™®é€šçš„ ts æ–‡ä»¶ä¸­ã€‚å®é™…ä¸Šï¼Œ`import ... require` å’Œ `export =` éƒ½æ˜¯ ts ä¸ºäº†å…¼å®¹ AMD è§„èŒƒå’Œ commonjs è§„èŒƒè€Œåˆ›ç«‹çš„æ–°è¯­æ³•ï¼Œç”±äºå¹¶ä¸å¸¸ç”¨ä¹Ÿä¸æ¨èä½¿ç”¨ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸è¯¦ç»†ä»‹ç»äº†ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥çœ‹[å®˜æ–¹æ–‡æ¡£](https://www.typescriptlang.org/docs/handbook/modules.html#export--and-import--require)ã€‚

ç”±äºå¾ˆå¤šç¬¬ä¸‰æ–¹åº“æ˜¯ commonjs è§„èŒƒçš„ï¼Œæ‰€ä»¥å£°æ˜æ–‡ä»¶ä¹Ÿå°±ä¸å¾—ä¸ç”¨åˆ° `export =` è¿™ç§è¯­æ³•äº†ã€‚ä½†æ˜¯è¿˜æ˜¯éœ€è¦å†å¼ºè°ƒä¸‹ï¼Œç›¸æ¯”ä¸ `export =`ï¼Œæˆ‘ä»¬æ›´æ¨èä½¿ç”¨ ES6 æ ‡å‡†çš„ `export default` å’Œ `export`ã€‚