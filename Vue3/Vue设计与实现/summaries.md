[toc]

### 框架设计预览

#### 权衡的艺术

> 框架设计里到处都体现了权衡的艺术

**命令式框架关注过程，声明式框架关注结果**

声明式代码的性能不优于命令式代码的性能，Vue.js内部实现一定是**命令式**的，暴露给用户的却更加**声明式**

<font size="3">**声明式代码的更新性能消耗 = 找出差异的性能消耗 + 直接修改的性能消耗**，所谓的**虚拟DOM**，就是为了**最小化**找出差异这一步的性能消耗而出现的</font>

对比innerHTML、虚拟DOM、原生javascript(指createElement)来更新页面，可发现在心智负担方面虚拟DOM最小，原生js最大；在性能方面，原生js性能最好，innerHTML性能最差；在可维护性方面，虚拟DOM可维护性最强，原生js可维护性最差；所以需要做到，既声明式的描述UI，又要具备原生js的性能。

在结合**心智负担、可维护性**等因素综合考虑，虚拟DOM是个不错的选择

纯运行时的框架没有编译的过程，无法分析用户提供的内容；纯编译时的框架有损灵活性；Vue.js 3是一个**编译时 + 运行时**的框架，在保持灵活性的基础上，可以通过编译手段分析用户提供的内容，从而进一步提升性能。

